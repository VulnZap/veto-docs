# Veto

> Authorization runtime for AI agents. Intercept every tool call, evaluate policy, then allow, deny, or require approval.

This file is optimized for coding agents and autonomous workflows.

## Canonical Resources

- Docs root: https://docs.runveto.com/docs
- CLI reference: https://docs.runveto.com/docs/sdk/cli
- YAML rules format: https://docs.runveto.com/docs/rules/yaml-format
- Validation modes: https://docs.runveto.com/docs/rules/validation-modes
- MCP gateway guide: https://docs.runveto.com/docs/guides/mcp-gateway
- API validate endpoint: https://docs.runveto.com/docs/api-reference/validate

## Agent-Safe Policy Contract (Create-Only)

Agents should use Veto with a non-destructive policy workflow:

1. Allowed operations:
   - Create policy files
   - Generate policy YAML from prompts
   - Apply new files locally or as cloud drafts
   - Validate tool calls with `guard check`
2. Disallowed operations:
   - Deleting policy files
   - Editing existing policy files in place
   - Deleting or mutating existing cloud policies directly
3. If a policy must change:
   - Create a new superseding policy file in `veto/rules/`
   - Keep old policies intact for auditability

## Fast Path: Native Headless Commands

Initialize once:

```bash
npx -y veto-cli@latest init
```

Generate policy from natural language (deterministic first):

```bash
npx -y veto-cli@latest policy generate \
  --tool approve_invoice \
  --prompt "do not approve invoices above 50 dollars" \
  --mode-hint deterministic \
  --save ./veto/rules/approve-invoice-over-50.generated.yaml \
  --json
```

Optional LLM-assisted generation when deterministic constraints are insufficient:

```bash
npx -y veto-cli@latest policy generate \
  --tool outbound_email \
  --prompt "deny sending customer data outside approved domains" \
  --mode-hint llm \
  --save ./veto/rules/outbound-email-sensitive.generated.yaml \
  --json
```

Apply new policy file:

```bash
npx -y veto-cli@latest policy apply \
  --file ./veto/rules/approve-invoice-over-50.generated.yaml \
  --target local \
  --json
```

Validate behavior:

```bash
npx -y veto-cli@latest guard check --tool approve_invoice --args '{"amount":40}' --mode local --json
npx -y veto-cli@latest guard check --tool approve_invoice --args '{"amount":75}' --mode local --json
```

## Runtime Integration

TypeScript:

```ts
import { Veto } from 'veto-sdk';

const veto = await Veto.init();
const guardedTools = veto.wrap(tools);
```

Python:

```python
from veto import Veto

veto = await Veto.init()
guarded_tools = veto.wrap(tools)
```

## Cloud + MCP

- Human auth for CLI: `veto cloud login`
- Managed MCP gateway: `/v1/mcp/:upstreamSlug` (SSE upstream in managed mode)
- Self-hosted MCP gateway: `veto mcp serve` (supports `mcp-sse` and `mcp-stdio`)

## skills.sh Skill

- Skill name: `veto-policy-runtime`
- Install skill pack: `npx skills add VulnZap/veto`
- Skill source: https://github.com/VulnZap/veto/tree/master/skills/veto-policy-runtime
- Skill file: https://github.com/VulnZap/veto/blob/master/skills/veto-policy-runtime/SKILL.md

This skill is tuned for coding agents and enforces create-only policy operations by default.
